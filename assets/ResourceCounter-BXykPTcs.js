import{j as e,r as i}from"./index-CHsasOJn.js";import{g as h,c as f,a as p}from"./utils-Bzi9kVJy.js";function g({data:n}){return console.log("---Display"),e.jsx("div",{className:"grid grid-flow-col gap-2 p-0.5 mb-6 border-2 border-b-blue-950 overflow-auto",children:n.map(({name:r,label:o,value:s,roundedFunction:a})=>e.jsxs("div",{className:"px-2 text-center border border-black text-nowrap",children:[e.jsx("h3",{className:"text-lg font-bold",children:o}),e.jsx("p",{className:"text-",children:s}),a&&e.jsx("p",{children:a(s)})]},r))})}const j=i.memo(function({blockName:r,name:o,id:s,value:a,onChange:t}){const l=c=>{t(+c.target.value,o,r)};return e.jsxs("div",{className:"flex leading-tight mb-0.5",children:[e.jsx("label",{htmlFor:s,className:"min-w-14 text-right pr-2",children:o}),e.jsx("input",{type:"number",id:s,name:o,value:a,onChange:l,className:"border px-1 w-[110px]"})]})});function v({formData:n,onChange:r}){return console.log("---ResourceForm"),e.jsx("div",{className:"flex flex-wrap justify-center gap-1",children:n.map(o=>e.jsxs("div",{className:"p-2 border border-black rounded-sm",children:[e.jsx("h2",{className:"mb-1 text-center font-bold text-base",children:h(o.name)}),o.blocks.map(s=>e.jsx(j,{blockName:o.name,id:o.name+s.name,name:s.name,value:s.value,onChange:r},s.name))]},o.name))})}const N=f.form.map(n=>({name:n.name,blocks:n.blocks.map(r=>({name:r,value:0}))}));function C(n){console.log("useFormCounter hook");const[r,o]=i.useState(n?n.formData:N),s=i.useRef(null),a=p(r),t=n?n.note:"",l=i.useCallback((c,u,x)=>{o(b=>b.map(m=>m.name===x?{...m,blocks:m.blocks.map(d=>d.name===u?{...d,value:c}:d)}:m))},[]);return{note:t,noteRef:s,formData:r,displayData:a,handleFormChange:l}}function y({noteRef:n,placeholder:r,handleSave:o}){return console.log("---ControlPanel"),e.jsxs("div",{className:"flex mb-6 justify-center items-center gap-4",children:[e.jsx("div",{className:"grow self-center text-right",children:e.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded cursor-pointer",onClick:()=>o(),children:"Save"})}),e.jsx("div",{children:e.jsx("label",{htmlFor:"note",children:"Note:"})}),e.jsx("div",{className:"grow self-center ",children:e.jsx("textarea",{className:"border-2 border-blue-500 hover:border-blue-700 py-2 px-4 rounded w-9/12",ref:n,defaultValue:r,id:"note"})})]})}function R({data:n,onSave:r}){console.log("-ResourceCounter");const{formData:o,note:s,noteRef:a,displayData:t,handleFormChange:l}=C(n);async function c(){if(typeof r<"u")return r(o,a.current?a.current.value:"")}return e.jsxs("div",{children:[e.jsx(g,{data:t}),e.jsx(y,{noteRef:a,placeholder:s,handleSave:c}),e.jsx(v,{onChange:l,formData:o})]})}export{R};
